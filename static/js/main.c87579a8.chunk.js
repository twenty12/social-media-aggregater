(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{29:function(e,t,c){},30:function(e,t,c){},31:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(0),r=c(8),s=c.n(r);function o(){return Object(n.jsx)("nav",{className:"navbar navbar-default border-bottom",children:Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsx)("div",{className:"navbar-header",children:Object(n.jsx)("span",{className:"navbar-brand",children:Object(n.jsx)("h1",{children:"Vend\xe9e"})})})})})}var i=c(7),u={UK:"\ud83c\uddec\ud83c\udde7",JPN:"\ud83c\uddef\ud83c\uddf5",DE:"\ud83c\udde9\ud83c\uddea"},l=function(e){var t=e.postData,c=e.accountData,r=Object(a.useState)(!0),s=Object(i.a)(r,2),o=s[0],l=s[1],d=Object(n.jsx)("img",{className:"img-fluid",src:"https://img.youtube.com/vi/".concat(t.source_id,"/maxresdefault.jpg")}),b=Object(n.jsx)("div",{className:"embed-responsive embed-responsive-16by9",children:Object(n.jsx)("iframe",{className:"embed-responsive-item border-0",src:"https://www.youtube.com/embed/".concat(t.source_id,"?&autoplay=1"),allow:"autoplay; encrypted-media",title:"video"})});return Object(n.jsx)("div",{className:"row justify-content-center",children:Object(n.jsx)("div",{className:"my-2 col-8",children:Object(n.jsxs)("div",{className:"card border-dark",children:[Object(n.jsx)("div",{className:"card-header bg-white border-0 pb-0",children:function(){var e=new Date(t.created);if(0!=Object.keys(c).length){var a,r,s,o=0===(null===(a=c.sailor.boat)||void 0===a?void 0:a.position)?"RET":null===(r=c.sailor.boat)||void 0===r?void 0:r.position;return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"d-flex",children:[Object(n.jsx)("div",{className:"mr-auto",children:c.sailor.name}),Object(n.jsx)("small",{children:Object(n.jsx)("div",{children:e.toLocaleString()})})]}),Object(n.jsx)("small",{children:Object(n.jsxs)("i",{children:[null===(s=c.sailor.boat)||void 0===s?void 0:s.name," ",u[c.flag]]})}),Object(n.jsx)("br",{}),Object(n.jsxs)("small",{children:["Position: ",o]})]})}}()}),Object(n.jsx)("div",{onClick:function(){return l(!1)},className:"card-body",children:o?d:b}),Object(n.jsx)("div",{className:"card-footer bg-white border-0 pt-0"})]})})},t.id)},d=c(2),b=c(4),j=c(5);function O(e,t){return{type:e,payload:t}}var p={posts:[],loading:!0,pageNumber:1},f=function(e){return function(t){fetch(function(e){return console.log(e),"https://social-media-aggregater.herokuapp.com/api/posts/?page="+e}(e)).then((function(e){return e.json()})).then((function(e){t(O("posts/ADD_POSTS",e.results))}))}};var h={accounts:[]},m=function(){return function(e){fetch("https://social-media-aggregater.herokuapp.com/api/accounts/").then((function(e){return e.json()})).then((function(t){e(O("teams/ADD_ACCOUNT",t.results))}))}};var v=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.post.pageNumber}));Object(a.useEffect)((function(){e(m()),e(f(t))}),[]);var c=Object(d.c)((function(e){return e.post.posts})),r=Object(d.c)((function(e){return e.post.loading}))?Object(n.jsx)("h1",{children:"Loading..."}):"",s=Object(d.c)((function(e){return e.team.accounts})).reduce((function(e,t,c){return e[t.id]=t,e}),{}),o=c.map((function(e){return Object(n.jsx)(l,{postData:e,accountData:0===Object.keys(s).length?{}:s[e.account]})})),u=Object(a.useRef)(null);(function(e){var t=Object(a.useState)(!1),c=Object(i.a)(t,2),n=c[0],r=c[1],s=new IntersectionObserver((function(e){var t=Object(i.a)(e,1)[0];return r(t.isIntersecting)}));return Object(a.useEffect)((function(){return s.observe(e.current),function(){s.disconnect()}}),[]),n})(u)&&t>1&&(console.log("loaded"),e(f(t)));return Object(n.jsxs)("div",{onScroll:function(e){e.target.scrollHeight-e.target.scrollTop===e.target.clientHeight&&console.log("bottom")},className:"container",children:[o,r,Object(n.jsx)("div",{ref:u})]})};c(29),c(30);var g=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.post.pageNumber}));return Object(n.jsxs)("div",{children:[Object(n.jsx)(o,{}),Object(n.jsx)("button",{onClick:function(){return e(f(t))},children:"Load em"}),Object(n.jsx)(v,{})]})},x=c(3),N=Object(x.c)({post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"posts/ADD_POSTS":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,pageNumber:e.pageNumber+1,posts:[].concat(Object(b.a)(e.posts),Object(b.a)(t.payload))});default:return e}},team:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"teams/ADD_ACCOUNT":return Object(j.a)(Object(j.a)({},e),{},{accounts:[].concat(Object(b.a)(e.accounts),Object(b.a)(t.payload))});default:return e}}}),y=c(15),D=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||x.d,w=Object(x.e)(N,D(Object(x.a)(y.a)));s.a.render(Object(n.jsx)(d.a,{store:w,children:Object(n.jsx)(g,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.c87579a8.chunk.js.map