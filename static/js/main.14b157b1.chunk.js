(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{30:function(e,t,c){},31:function(e,t,c){},32:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c(0),a=c(8),r=c.n(a);function o(){var e=Object(n.jsxs)("small",{children:["By ",Object(n.jsx)("a",{className:"text-black",href:"http://danielgladstone.com",children:"Daniel Gladstone"})]});return Object(n.jsx)("nav",{className:"navbar navbar-default border-bottom",children:Object(n.jsxs)("div",{className:"w-100",children:[Object(n.jsx)("div",{className:"d-flex",children:Object(n.jsx)("span",{className:"navbar-brand text-wrap",children:Object(n.jsx)("h1",{children:"Vend\xe9e Globe Tracker"})})}),Object(n.jsxs)("div",{className:"d-flex w-100 align-items-end",children:[Object(n.jsx)("h4",{className:"mb-0",children:"All the content"}),Object(n.jsx)("div",{className:"ml-auto d-flex align-items-end",children:e})]})]})})}var i=c(7),l={UK:"\ud83c\uddec\ud83c\udde7",JPN:"\ud83c\uddef\ud83c\uddf5",DE:"\ud83c\udde9\ud83c\uddea",FRN:"\ud83c\uddeb\ud83c\uddf7",CH:"\ud83c\udde8\ud83c\udded",IT:"\ud83c\uddee\ud83c\uddf9"},d=function(e){var t=e.postData,c=e.accountData,a=Object(s.useState)(!0),r=Object(i.a)(a,2),o=r[0],d=r[1],j=Object(n.jsx)("img",{className:"img-fluid",src:t.thumbnail}),b=Object(n.jsx)("div",{className:"embed-responsive embed-responsive-16by9",children:Object(n.jsx)("iframe",{className:"embed-responsive-item border-0",src:"https://www.youtube.com/embed/".concat(t.source_id,"?&autoplay=1"),allow:"autoplay; encrypted-media",title:"video"})});return Object(n.jsx)("div",{className:"row justify-content-center",children:Object(n.jsx)("div",{className:"my-2 col-sm-12 col-md-8",children:Object(n.jsxs)("div",{className:"card border-dark",children:[Object(n.jsx)("div",{className:"card-header bg-white border-0 pb-0",children:function(){var e,s,a=new Date(t.created);if(0!=Object.keys(c).length){var r,o,i,d=0===(null===(r=c.sailor.boat)||void 0===r?void 0:r.position)?"RET":null===(o=c.sailor.boat)||void 0===o?void 0:o.position;return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"d-flex",children:[Object(n.jsx)("div",{className:"mr-auto ",children:c.sailor.name}),Object(n.jsx)("small",{className:"mt-2 mb-n2",children:(e=a.toLocaleString(),s=RegExp(","),e.split(s).map((function(e){return RegExp(":").test(e)?Object(n.jsx)("span",{className:"d-block d-md-inline",children:e}):e})))})]}),Object(n.jsx)("small",{children:Object(n.jsxs)("i",{children:[null===(i=c.sailor.boat)||void 0===i?void 0:i.name," ",l[c.flag]," "]})}),Object(n.jsx)("br",{}),Object(n.jsxs)("small",{children:["Position: ",d]})]})}}()}),Object(n.jsx)("div",{onClick:function(){return d(!1)},className:"card-body d-flex justify-content-center",children:o?j:b}),Object(n.jsx)("div",{className:"card-footer bg-white border-0 pt-0"})]})})},t.id)},j=c(2),b=c(5),u=c(4);function O(e,t){return{type:e,payload:t}}var m={posts:[],loading:!0,pageNumber:1,showInfo:!1},h=function(e){return function(t){fetch(function(e){return console.log(e),"https://social-media-aggregater.herokuapp.com/api/posts/?page="+e}(e)).then((function(e){return e.json()})).then((function(e){t(O("posts/ADD_POSTS",e.results))}))}};var f={accounts:[]},p=function(){return function(e){fetch("https://social-media-aggregater.herokuapp.com/api/accounts/").then((function(e){return e.json()})).then((function(t){e(O("teams/ADD_ACCOUNT",t.results))}))}};var v=c(16);var x=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.post.pageNumber})),c=Object(j.c)((function(e){return e.post.showInfo}));Object(s.useEffect)((function(){e(p()),e(h(t))}),[]);var a=Object(j.c)((function(e){return e.post.posts})),r=Object(j.c)((function(e){return e.post.loading}))?Object(n.jsx)("h1",{children:"Loading..."}):"",o=Object(j.c)((function(e){return e.team.accounts})).reduce((function(e,t,c){return e[t.id]=t,e}),{}),l=a.map((function(e){return Object(n.jsx)(d,{postData:e,accountData:0===Object.keys(o).length?{}:o[e.account]})})),b=Object(s.useRef)(null);(function(e){var t=Object(s.useState)(!1),c=Object(i.a)(t,2),n=c[0],a=c[1],r=new IntersectionObserver((function(e){var t=Object(i.a)(e,1)[0];return a(t.isIntersecting)}));return Object(s.useEffect)((function(){return r.observe(e.current),function(){r.disconnect()}}),[]),n})(b)&&t>1&&(console.log("loaded"),e(h(t)));return Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("div",{className:"row justify-content-center",children:[Object(n.jsx)("div",{className:"col-sm-12 mt-1 col-md-8 d-flex",children:Object(n.jsx)(v.a,{onClick:function(){return e(O("posts/TOGGLE_INFO"))}})}),function(){if(console.log(o),c)return Object(n.jsx)("div",{className:"col-sm-12 mt-1 col-md-8 d-flex",children:Object(n.jsx)("div",{className:"card border-dark w-100 ",children:Object(n.jsxs)("div",{className:"card-body py-1",children:[Object(n.jsx)("div",{children:Object(n.jsxs)("small",{children:["Accounts monitored: ",Object.keys(o).length]})}),Object(n.jsx)("div",{children:Object(n.jsxs)("small",{children:["Last updated: ",Object.keys(o).length<2?"a":(e=o[1].updated,new Date(e).toLocaleString())]})})]})})});var e}()]}),l,r,Object(n.jsx)("div",{ref:b})]})};c(30),c(31);var g=function(){return Object(j.b)(),Object(j.c)((function(e){return e.post.pageNumber})),Object(n.jsxs)("div",{children:[Object(n.jsx)(o,{}),Object(n.jsx)(x,{})]})},N=c(3),w=Object(N.c)({post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"posts/ADD_POSTS":return Object(u.a)(Object(u.a)({},e),{},{loading:!1,pageNumber:e.pageNumber+1,posts:[].concat(Object(b.a)(e.posts),Object(b.a)(t.payload))});case"posts/TOGGLE_INFO":return Object(u.a)(Object(u.a)({},e),{},{showInfo:!e.showInfo});default:return e}},team:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"teams/ADD_ACCOUNT":return Object(u.a)(Object(u.a)({},e),{},{accounts:[].concat(Object(b.a)(e.accounts),Object(b.a)(t.payload))});default:return e}}}),y=c(15),D=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||N.d,k=Object(N.e)(w,D(Object(N.a)(y.a)));r.a.render(Object(n.jsx)(j.a,{store:k,children:Object(n.jsx)(g,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.14b157b1.chunk.js.map